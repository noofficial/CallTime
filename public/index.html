<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CallTime Desk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="topbar">
        <div class="branding">
          <span class="branding__logo" aria-hidden="true">☎︎</span>
          <div>
            <div class="branding__title">CallTime Desk</div>
            <div class="branding__subtitle">Campaign call-time workspace</div>
          </div>
        </div>
        <div class="topbar__actions">
          <button class="btn btn--ghost" id="load-demo">
            Load demo workspace
          </button>
          <a class="btn btn--ghost" id="open-database" href="donors.html">
            Complete donor database
          </a>
          <button class="btn" id="manage-clients">Manage clients</button>
        </div>
      </header>

      <div class="layout">
        <aside class="sidebar" aria-label="Client selector">
          <div class="sidebar__header">
            <h2>Clients</h2>
            <button class="icon-btn" id="add-client" aria-label="Add client">
              <span aria-hidden="true">＋</span>
            </button>
          </div>
          <p class="sidebar__hint">Switch between campaigns with isolated notes.</p>
          <ul class="client-list" id="client-list" role="list"></ul>
        </aside>

        <main class="workspace" id="workspace" tabindex="-1">
          <section class="empty-state" id="empty-state">
            <h1>Set up your first client</h1>
            <p>
              Connect a Google Sheet or upload donor data to create a dedicated
              call-time desk for each campaign. Notes and outcomes are stored
              locally and kept separate per client.
            </p>
            <div class="empty-state__actions">
              <button class="btn btn--primary" id="empty-create">Add client</button>
              <button class="btn btn--ghost" id="empty-demo">Preview demo</button>
            </div>
          </section>

          <section class="client-dashboard hidden" id="client-dashboard">
            <header class="client-dashboard__header">
              <div>
                <h1 id="client-name">Client Name</h1>
                <p id="client-meta" class="muted"></p>
              </div>
              <div class="session-controls">
                <button class="btn" id="refresh-donors">Refresh sheet</button>
                <button class="btn btn--primary" id="start-session">
                  Start call time
                </button>
                <a class="btn btn--ghost" id="manage-donors" href="donors.html">
                  Manage donor records
                </a>
              </div>
            </header>

            <div class="workspace__body">
              <section class="donor-list" aria-labelledby="donor-list-title">
                <div class="donor-list__header">
                  <h2 id="donor-list-title">Donor queue</h2>
                  <div class="donor-list__filters">
                    <label class="sr-only" for="donor-search">Search donors</label>
                    <input
                      id="donor-search"
                      class="input"
                      type="search"
                      placeholder="Search name, city, employer"
                    />
                    <label class="sr-only" for="status-filter">Filter by status</label>
                    <select id="status-filter" class="input select">
                      <option value="all">All outcomes</option>
                    </select>
                  </div>
                </div>
                <ul class="donor-items" id="donor-items" role="list"></ul>
              </section>

              <section class="donor-detail" aria-live="polite" id="donor-detail">
                <div class="donor-detail__placeholder">
                  Select a donor to review their profile and log call notes.
                </div>
              </section>
            </div>
          </section>
        </main>
      </div>
    </div>

    <dialog class="modal" id="client-dialog">
      <form method="dialog" class="modal__content" id="client-form">
        <header class="modal__header">
          <h2 id="client-form-title">New client</h2>
        </header>
        <div class="modal__body">
          <div class="form-row">
            <label class="form-label" for="client-label">Client label</label>
            <input
              class="input"
              id="client-label"
              name="label"
              placeholder="Jane for City Council"
              required
            />
          </div>
          <div class="form-row">
            <label class="form-label" for="client-candidate">Candidate name</label>
            <input
              class="input"
              id="client-candidate"
              name="candidate"
              placeholder="Jane Candidate"
            />
          </div>
          <div class="form-row">
            <label class="form-label" for="client-office">Office or race</label>
            <input
              class="input"
              id="client-office"
              name="office"
              placeholder="City Council At-Large"
            />
          </div>
          <div class="form-row">
            <label class="form-label" for="client-sheet"
              >Google Sheet link (publish to web)</label
            >
            <input
              class="input"
              id="client-sheet"
              name="sheet"
              type="url"
              placeholder="https://docs.google.com/spreadsheets/d/.../gviz/tq?tqx=out:json"
            />
            <p class="form-help">
              Paste the <strong>gviz JSON</strong> or <strong>published CSV</strong>
              link. Each row becomes a donor record.
            </p>
          </div>
          <div class="form-row">
            <label class="form-label" for="client-timezone">Timezone</label>
            <input
              class="input"
              id="client-timezone"
              name="timezone"
              placeholder="America/New_York"
            />
            <p class="form-help">
              Used for scheduling reminders. Defaults to your browser timezone.
            </p>
          </div>
        </div>
        <footer class="modal__footer">
          <button class="btn btn--ghost" value="cancel">Cancel</button>
          <button class="btn btn--primary" value="confirm" id="save-client">
            Save client
          </button>
        </footer>
      </form>
    </dialog>

    <template id="donor-item-template">
      <li class="donor-item">
        <button type="button" class="donor-item__button"></button>
      </li>
    </template>

    <script src="app.js" type="module"></script>
  </body>
</html>
